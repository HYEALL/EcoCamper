
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
<style>
.swiper-container {
            width: 100%;
            height: 100vh;
            position: relative;
}
.swiper-slide {
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 18px;
	text-align: center;
	background: #eee;
	transition: opacity 1s ease-in-out; /* 부드러운 페이드 효과를 위해 transition 추가 */
	
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.slider {
	position: relative;
	margin: auto;
	overflow: hidden;
	border: 2px solid #ddd;
	border-radius: 10px;
	margin-top: 100px;
	display: flex; /* 가로 중앙 정렬 */
	align-items: center; /* 세로 중앙 정렬 */
	justify-content: center; /* 가로 중앙 정렬 */
	height: 50vh; /* 브라우저 창 높이에 대한 비율로 설정 */
	height: 500px;
	max-width: 1300px;
}

.slides {
	display: flex;
	transition: transform 0.5s ease-in-out;
	width: 65%; /*슬라이더 안에서 사진이 가로의 몇퍼센트를 차지하냐 여백을 35%준다는말*/
}

.slide {
	min-width: 100%;
	min-height: 100%;
	box-sizing: border-box;
	display: flex; /* 가로 중앙 정렬 */
	justify-content: center; /* 가로 중앙 정렬 */
	align-items: center; /* 세로 중앙 정렬 */
}

.slide img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.prev, .next {
	cursor: pointer;
	position: absolute;
	top: 50%;
	width: auto;
	padding: 16px;
	margin-top: -22px;
	color: white;
	font-weight: bold;
	font-size: 18px;
	border-radius: 3px;
	user-select: none;
	background-color: rgba(0, 0, 0, 0.5);
}

.prev {
	left: 0;
}

.next {
	right: 0;
}

.product-container {
	padding: 20px;
	max-width: 1200px;
	margin: auto;
}

.product {
	border: 1px solid #ddd;
	border-radius: 5px;
	margin-bottom: 20px;
	background-color: #fff;
	overflow: hidden;
	text-align: center;
}

.product img {
	width: 100%;
	height: auto;
}

.productinfo {
	padding: 15px;
}

.productinfo h2 {
	margin: 0;
	font-size: 1.5em;
}

.productinfo p {
	margin: 10px 0;
}

.productinfo .price {
	font-size: 1.2em;
	color: #e60012;
}

.productinfo button {
	padding: 10px 20px;
	background-color: #4CAF50;
	color: white;
	border: none;
	border-radius: 5px;
	cursor: pointer;
}

.productinfo button:hover {
	background-color: #45a049;
}

/* 창의 너비가 600px 이하일 때 */
@media ( max-width : 1200px) {
	.cart {
		position: fixed;
		top: 10px;
		right: 10px;
		background-color: #4CAF50;
		color: white;
		padding: 8px 15px;
		font-size: 14px;
		border-radius: 5px;
		cursor: pointer;
		margin-top: 75px;
		margin-right: 40px;
	}
}
/* 창의 너비가 600px 이상일 때 */
@media ( min-width : 1200px) {
	.cart {
		position: fixed;
		top: 10px;
		right: 10px;
		background-color: #4CAF50;
		color: white;
		padding: 9px 18px;
		border-radius: 5px;
		cursor: pointer;
		margin-top: 90px;
		margin-right: 30px;
	}
}

.cart:hover {
	background-color: #45a049;
}
</style>
<div class="cart" onclick="showCart()">
	장바구니 (<span id="cart-count">0</span>)
</div>

<!-- 슬라이드 화면 1 -->
<div class="swiper-container">
	<div class="swiper-wrapper">
		<div class="swiper-slide">
			<img alt="" src="../images/main_camping1.jpg">
		</div>
		<div class="swiper-slide">
			<img alt="" src="../images/main_camping2.jpg">
		</div>
		<div class="swiper-slide">
			<img alt="" src="../images/main_camping3.jpg">
		</div>
		<div class="swiper-slide">
			<img alt="" src="../images/main_camping4.jpg">
		</div>
	</div>
	<!-- Add Scrollbar -->
	<!-- 
	<div class="swiper-scrollbar"></div>
	 -->
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
	        var swiper = new Swiper('.swiper-container', {
	            effect: 'fade',             // 페이드 효과
	            fadeEffect: {
	                crossFade: true,        // 슬라이드 간 부드러운 전환
	            },
	            slidesPerView: 1,
	            spaceBetween: 0,
	            loop: true,                 // 슬라이드가 끝나면 다시 시작
	            autoplay: {
	                delay: 3000,            // 슬라이드 전환 간격 (밀리초)
	                disableOnInteraction: false, // 사용자 상호작용 시 자동 재생 유지
	            },
	            scrollbar: {
	                el: '.swiper-scrollbar',
	                draggable: true,
	            },
	            speed: 1000,                // 슬라이드 전환 속도 (밀리초)
	            mousewheel: true,
	            keyboard: true,
	        });
	    </script>


<!-- 슬라이드 화면 2-->
<div class="slider">
	<div class="slides">
		<div class="slide">
			<a href="/shop/shopview?pcode=0001"> <img
				src="../images/cleaner.jpg" width="100" height="100"></a>
		</div>
		<div class="slide">
			<a href="/shop/shopview?pcode=0002"> <img
				src="../images/roll.jpg" width="100" height="100">
			</a>
		</div>
		<div class="slide">
			<a href="/shop/shopview?pcode=0003"> <img
				src="../images/water.jpg" width="100" height="100">
			</a>
		</div>
	</div>
	<a class="prev" onclick="prevSlide()">&#10094;</a> <a class="next"
		onclick="nextSlide()">&#10095;</a>
</div>

<!-- 상품 진열 -->
<div class="product-container" id="products1">
	<h2>자사 대여상품 목록</h2>

	<!-- pcode 로 href에 공유걸어서 view 에서 db 데이터 불러오고 th:data-code 등 dto로 받아서 장바구니에 저장한다. -->

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품1" alt="제품1"></a>
		<div class="productinfo" data-code="0001" data-name="세제"
			data-price="25000" data-img="cleaner.jpg">
			<a href="/shop/shopview?pcode=0001"><h2>자사 대여상품</h2></a>
			<p>대여상품입니다</p>
			<p class="price">₩25,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품2" alt="제품2"></a>
		<div class="productinfo" data-code="0002" data-name="휴지"
			data-price="50000" data-img="roll.jpg">
			<a href="/shop/shopview?pcode=0001"><h2>자사 대여상품</h2></a>
			<p>대여상품입니다</p>
			<p class="price">₩30,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<!-- 추가적인 제품들을 여기에 삽입 -->
</div>
<div class="product-container" id="products2">
	<h2>친환경캠핑장비 목록</h2>

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품1" alt="제품1"></a>
		<div class="productinfo">
			<a href="/shop/shopview?pcode=0001"><h2>친환경캠핑장비</h2></a>
			<p>친환경캠핑장비입니다. 훌륭한 제품입니다.</p>
			<p class="price">₩25,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품2" alt="제품2"></a>
		<div class="productinfo">
			<a href="/shop/shopview?pcode=0001"><h2>친환경캠핑장비</h2></a>
			<p>친환경캠핑장비입니다. 훌륭한 제품입니다.</p>
			<p class="price">₩30,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<!-- 추가적인 제품들을 여기에 삽입 -->
</div>
<div class="product-container" id="products3">
	<h2>일반캠핑장비 목록</h2>

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품1" alt="제품1"></a>
		<div class="productinfo" data-name="0001" data-price="25000"
			data-img="roll.jpg">
			<a href="/shop/view?pcode=0001"><h2>일반캠핑장비</h2></a>
			<p>일반캠핑장비입니다. 훌륭한 제품입니다.</p>
			<p class="price">₩25,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<div class="product">
		<a href="/shop/shopview?pcode=0001"> <img
			src="https://via.placeholder.com/400x300?text=제품2" alt="제품2"></a>
		<div class="productinfo">
			<a href="/shop/view?pcode=0001"><h2>일반캠핑장비</h2></a>
			<p>일반캠핑장비입니다. 훌륭한 제품입니다.</p>
			<p class="price">₩30,000</p>
			<button onclick="addToCart()" class="add-to-cart">장바구니에 추가</button>
		</div>
	</div>

	<!-- 추가적인 제품들을 여기에 삽입 -->
</div>


<script>
/* 슬라이드 화면 */
		let slideIndex = 0;
		showSlides();

		function showSlides() {
			let slides = document.getElementsByClassName("slide");
			for (let i = 0; i < slides.length; i++) {
				slides[i].style.display = "none";
			}
			slideIndex++;
			if (slideIndex > slides.length) {
				slideIndex = 1
			}
			slides[slideIndex - 1].style.display = "block";
			setTimeout(showSlides, 3000); // Change image every 3 seconds
		}

		function prevSlide() {
			let slides = document.getElementsByClassName("slide");
			slideIndex--;
			if (slideIndex < 1) {
				slideIndex = slides.length
			}
			for (let i = 0; i < slides.length; i++) {
				slides[i].style.display = "none";
			}
			slides[slideIndex - 1].style.display = "block";
		}

		function nextSlide() {
			let slides = document.getElementsByClassName("slide");
			slideIndex++;
			if (slideIndex > slides.length) {
				slideIndex = 1
			}
			for (let i = 0; i < slides.length; i++) {
				slides[i].style.display = "none";
			}
			slides[slideIndex - 1].style.display = "block";
		}
		
	
		
		function confirm_orderList(){
			if("[[${userId}]]" != "" ){
				location.href="/shop/shopOrderList"	;
			}else {
				alert("로그인 후 주문내역 열람이 가능합니다.")
				if(confirm("로그인 창으로 이동하시겠습니까?"))	location.href="/loginForm"
				    
			}
		}
		
		
		
/* 장바구니 저장 및 업데이트 */

		function addToCart(event) {
			event.preventDefault();  // 기본 동작 방지

			// 제품 정보를 가져옴
			const productinfoDiv = event.target.closest('.productinfo');  // 상위 .productinfo 찾기
			const code = productinfoDiv.getAttribute('data-code');
			const name = productinfoDiv.getAttribute('data-name');
			const img = productinfoDiv.getAttribute('data-img');
			const price = parseFloat(productinfoDiv.getAttribute('data-price'));
			const quantity = 1;  // 기본 수량

			// 기존 장바구니 데이터 불러오기
			let cart = JSON.parse(sessionStorage.getItem('cart')) || [];

			// 상품이 이미 장바구니에 있는지 확인
			const existingProductIndex = cart.findIndex(item => item.code === code);
			if (existingProductIndex > -1) {
				// 상품이 이미 장바구니에 있을 경우 수량을 증가
				cart[existingProductIndex].quantity += quantity;
			} else {
				// 새 상품 추가
				cart.push({ code, name, img, price, quantity });
			}

			// sessionStorage에 저장
			sessionStorage.setItem('cart', JSON.stringify(cart));

			// 장바구니 카운트 업데이트
			updateCartCount();

			// 확인 메시지
			alert(name + '이(가) 장바구니에 추가되었습니다!');
		}

		function updateCartCount() {
			// 장바구니 아이템 수량 계산
			let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
			let totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
			document.getElementById('cart-count').textContent = totalQuantity;
		}

		function showCart() {
			location.href = '/shop/shopcart';
		}

		// 페이지 로드 시 장바구니 카운트 초기화
		document.addEventListener('DOMContentLoaded', function() {
			updateCartCount();

			document.querySelectorAll('.add-to-cart').forEach(button => {
				button.removeEventListener('click', addToCart);  // 기존 이벤트 리스너 제거
				button.addEventListener('click', addToCart);
			});
		});
	</script>
</body>
</html>

